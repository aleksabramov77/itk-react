(this["webpackJsonpreact-kabzda-1"]=this["webpackJsonpreact-kabzda-1"]||[]).push([[0],{18:function(e,t,n){e.exports={profileMainBlock:"ProfileInfo_profileMainBlock__2-Pp8",profileAvatarBlock:"ProfileInfo_profileAvatarBlock__3o8Vj",profileAvatar:"ProfileInfo_profileAvatar__3g_kE",profileDataBlock:"ProfileInfo_profileDataBlock__4lz2o",profileStatusBlock:"ProfileInfo_profileStatusBlock__ftdqt",profileDataItem:"ProfileInfo_profileDataItem__R0i1_",profileDataItem_value:"ProfileInfo_profileDataItem_value__29WoA",contactsBlock:"ProfileInfo_contactsBlock__1obYR",profileDataItem_type:"ProfileInfo_profileDataItem_type__3PSpZ"}},20:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var a=n(2),r=n(65),s=(n(1),n(49)),c=n.n(s),o=n(0),i=["input","meta"],u=function(e){return function(t){var n=t.input,s=t.meta,u=Object(r.a)(t,i),l=s.submitError||s.touched&&s.error;return Object(o.jsxs)("div",{className:c.a.formControl+" "+(l?c.a.error:""),children:[l&&Object(o.jsxs)("span",{children:[" ",s.error||s.submitError," "]}),Object(o.jsx)(e,Object(a.a)(Object(a.a)({},n),u))]})}},l=u("textarea"),d=u("input")},22:function(e,t,n){e.exports={dialogs:"Messenger_dialogs__ZAK-v",dialogsItems:"Messenger_dialogsItems__32SnW",messagesItems:"Messenger_messagesItems__VrlWw",message:"Messenger_message__F5ho9",newMessage:"Messenger_newMessage__no0L-",textareaBlock:"Messenger_textareaBlock__3F4js",buttonBlock:"Messenger_buttonBlock__p13PJ",submitError:"Messenger_submitError__1d5hm"}},27:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return O}));var a=n(37),r=n(4),s=n.n(r),c=n(8),o=n(2),i=n(9),u=n(28),l=n(7),d=(n(1),"auth/SET_USER"),p="auth/SET_CAPTCHA",b={id:null,email:null,login:null,isAuth:!1,captchaURL:null},j=function(e,t,n,a){return{type:d,payload:{id:e,email:t,login:n,isAuth:a,captchaURL:null}}},f=function(){return function(){var e=Object(c.a)(s.a.mark((function e(t){var n,a,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(l.c)(!0)),e.next=3,i.a.me();case 3:0===(n=e.sent).data.resultCode&&(a=n.data.data,r=a.id,c=a.email,o=a.login,t(j(r,c,o,!0))),t(Object(l.c)(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(e,t,n,r){return function(){var o=Object(c.a)(s.a.mark((function c(o){var d;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return o(Object(l.c)(!0)),s.next=3,i.a.logIn(e,t,n,r);case 3:if(d=s.sent,o(Object(l.c)(!1)),0!==d.data.resultCode){s.next=9;break}o(f()),s.next=11;break;case 9:return 10===d.data.resultCode&&o(m()),s.abrupt("return",Object(a.a)({},u.a,d.data.messages[0]));case 11:case"end":return s.stop()}}),c)})));return function(e){return o.apply(this,arguments)}}()},O=function(){return function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(l.c)(!0)),e.next=3,i.a.logOut();case 3:0===e.sent.data.resultCode&&t(j(null,null,null,!1)),t(Object(l.c)(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(){return function(){var e=Object(c.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.c.getCaptchaURL();case 2:n=e.sent,t((a=n.data.url,{type:p,payload:{captchaURL:a}}));case 4:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:case p:return Object(o.a)(Object(o.a)({},e),t.payload);default:return e}}},29:function(e,t,n){e.exports={appWrapper:"App_appWrapper__3PKr9",block:"App_block__QnjH9",header:"App_header__3_o6u",navbar:"App_navbar__wo81B",content:"App_content__zh_n7"}},30:function(e,t,n){e.exports={nav:"Navbar_nav__2w_RG",active:"Navbar_active__1Cg4L"}},39:function(e,t,n){e.exports={appWrapperContent:"Content_appWrapperContent__EV0v9",contentHeadImage:"Content_contentHeadImage__1mX_H",dynamicContent:"Content_dynamicContent__8Mh8m"}},40:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__3WxEe",posts:"MyPosts_posts__3pCHv",post:"MyPosts_post__2gayn",textareaBlock:"MyPosts_textareaBlock__17YF_",buttonBlock:"MyPosts_buttonBlock__3uTWO"}},41:function(e,t,n){e.exports={post:"Post_post__-KDIx",avatar:"Post_avatar__1xu3N",postText:"Post_postText__fpT_b",likesCounter:"Post_likesCounter__1kTtW"}},42:function(e,t,n){e.exports={header:"Header_header__1gUzD",headerImg:"Header_headerImg__j1cfj",loginBlock:"Header_loginBlock__3_HnM"}},47:function(e,t,n){},48:function(e,t,n){e.exports={statusBlock:"ProfileStatus_statusBlock__3qNih",statusInputBlock:"ProfileStatus_statusInputBlock__ElZOJ"}},49:function(e,t,n){e.exports={formControl:"FormsControls_formControl__1FPlP",error:"FormsControls_error__mOc95"}},50:function(e,t,n){"use strict";t.a=n.p+"static/media/defaultAvatar.031be920.png"},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(19),r=n(2),s="messengerPage/ADD_MESSAGE",c={dialogsData:[{id:1,name:"Dimych"},{id:2,name:"Sasha"},{id:3,name:"Viktor"},{id:4,name:"Lena"},{id:5,name:"Misha"},{id:6,name:"Egor"},{id:7,name:"Sveta"}],messagesData:[{id:1,message:"Hi !!!"},{id:2,message:"How are you ?"},{id:4,message:"Yo"},{id:3,message:"Yo yo"},{id:5,message:"Yo yo yo"}]},o=function(e){return{type:s,newMessageText:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:var n={id:e.messagesData.length+1,message:t.newMessageText};return Object(r.a)(Object(r.a)({},e),{},{messagesData:[].concat(Object(a.a)(e.messagesData),[n])});default:return e}}},6:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(t,n){return t||n(e)}),void 0)}},r=function(e){return e?void 0:"Field is required"},s=function(e){return function(t){return t&&t.length>e?"Must be ".concat(e," characters or less"):void 0}},c=function(e){return function(t){return t&&t.length<e?"Must be ".concat(e," characters or more"):void 0}}},60:function(e,t,n){"use strict";n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return P})),n.d(t,"e",(function(){return y})),n.d(t,"b",(function(){return w}));var a=n(4),r=n.n(a),s=n(8),c=n(19),o=n(2),i=n(9),u=n(7),l=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(o.a)(Object(o.a)({},e),a):e}))},d="usersPage/FOLLOW",p="usersPage/UNFOLLOW",b="usersPage/SET_USERS",j="usersPage/SET_CURRENT_PAGE",f="usersPage/SET_TOTAL_USERS_COUNT",h="usersPage/TOGGLE_FOLLOWING",O="usersPage/FAKE",m={users:[],totalUsersCount:0,usersOnPage:20,currentPage:1,followingInProgress:[],fake:0},v=function(e){return{type:d,userId:e}},x=function(e){return{type:p,userId:e}},g=function(e){return{type:j,currentPage:e}},_=function(e,t){return{type:h,following:e,id:t}},P=function(e,t){return function(){var n=Object(s.a)(r.a.mark((function n(a){var s;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Object(u.c)(!0)),n.next=3,i.d.getUsers(e,t);case 3:s=n.sent,a((c=s.data.items,{type:b,users:c})),a((r=s.data.totalCount,{type:f,totalUsersCount:r})),a(Object(u.c)(!1));case 7:case"end":return n.stop()}var r,c}),n)})));return function(e){return n.apply(this,arguments)}}()},k=function(){var e=Object(s.a)(r.a.mark((function e(t,n,a,s){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(_(!0,n)),e.next=3,a(n);case 3:0===e.sent.data.resultCode&&(t(s(n)),t(_(!1,n)));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),y=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(n,e,i.d.unfollowUser.bind(i.d),x);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(s.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(n,e,i.d.followUser.bind(i.d),v);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(o.a)(Object(o.a)({},e),{},{users:l(e.users,t.userId,"id",{followed:!0})});case p:return Object(o.a)(Object(o.a)({},e),{},{users:l(e.users,t.userId,"id",{followed:!1})});case b:return Object(o.a)(Object(o.a)({},e),{},{users:t.users});case j:return Object(o.a)(Object(o.a)({},e),{},{currentPage:t.currentPage});case f:return Object(o.a)(Object(o.a)({},e),{},{totalUsersCount:t.totalUsersCount});case h:return Object(o.a)(Object(o.a)({},e),{},{followingInProgress:t.following?[].concat(Object(c.a)(e.followingInProgress),[t.id]):Object(c.a)(e.followingInProgress.filter((function(e){return e!==t.id})))});case O:return Object(o.a)(Object(o.a)({},e),{},{fake:e.fake+1});default:return e}}},62:function(e,t,n){e.exports={preloader:"Preloader_preloader__1sTLg"}},7:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(4),r=n.n(a),s=n(8),c=n(2),o=n(27),i="app/INITIALIZED_SUCCESS",u={initialized:!1,isFetching:!0},l=function(e){return{type:"app/TOGGLE_FETCHING",isFetching:e}},d=function(){return function(){var e=Object(s.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Object(o.b)());case 2:n=e.sent,Promise.all([n]).then((function(){return t({type:i})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return Object(c.a)(Object(c.a)({},e),{},{initialized:!0});default:return e}}},70:function(e,t,n){},9:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return u}));var a=n(2),r=n(63),s=n.n(r).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"05f0dc87-f93b-4a11-b796-0fb78655f73d"}}),c={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return s.get("users?count=".concat(e,"&page=").concat(t))},unfollowUser:function(e){return s.delete("follow/".concat(e))},followUser:function(e){return s.post("follow/".concat(e),{})},getProfile:function(e,t){return console.warn('Obsolete method" Please profileAPI object'),o.getProfile(e,t)}},o={getProfile:function(e){return s.get("profile/".concat(e))},getUserStatus:function(e){return s.get("profile/status/".concat(e))},updateUserStatus:function(e){return s.put("profile/status",{status:e})},updatePhoto:function(e){var t=new FormData;return t.append("image",e),s.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},updateProfileData:function(e){return s.put("profile",Object(a.a)(Object(a.a)({},e),e.contacts))}},i={me:function(){return s.get("auth/me")},logIn:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return s.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a})},logOut:function(){return s.delete("auth/login")}},u={getCaptchaURL:function(){return s.get("security/get-captcha-url")}}},97:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(35),c=n.n(s),o=(n(70),n(23)),i=n(26),u=n(25),l=n(24),d=n(29),p=n.n(d),b=n(13),j=n(30),f=n.n(j),h=n(0),O=function(e){return Object(h.jsxs)("nav",{className:f.a.nav,children:[Object(h.jsx)("div",{children:Object(h.jsx)(b.b,{to:"/profile",activeClassName:f.a.active,children:"Profile"})}),Object(h.jsx)("div",{children:Object(h.jsx)(b.b,{to:"/messenger",activeClassName:f.a.active,children:"Messenger"})}),Object(h.jsx)("div",{children:Object(h.jsx)(b.b,{to:"/users",activeClassName:f.a.active,children:"Users"})}),Object(h.jsx)("div",{children:Object(h.jsx)(b.b,{to:"/news",activeClassName:f.a.active,children:"News"})}),Object(h.jsx)("div",{children:Object(h.jsx)(b.b,{to:"/music",activeClassName:f.a.active,children:"Music"})}),Object(h.jsx)("div",{children:Object(h.jsx)(b.b,{to:"/settings",activeClassName:f.a.active,children:"Settings"})})]})},m=n(5),v=n(39),x=n.n(v),g=n(16),_=n(47),P=n.n(_),k=n(4),y=n.n(k),w=n(8),I=n(2),S=n(19),C=n(32),E=n(18),N=n.n(E),M=n(50),D=n(48),T=n.n(D),U=function(e){var t=r.a.useState(!1),n=Object(C.a)(t,2),a=n[0],s=n[1],c=r.a.useState(e.status),o=Object(C.a)(c,2),i=o[0],u=o[1];r.a.useEffect((function(){u(e.status)}),[e.status]);return Object(h.jsx)("div",{children:a?Object(h.jsx)("div",{children:Object(h.jsx)("input",{className:T.a.statusInputBlock,onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){s(!1),e.updateUserStatus(i)},value:i})}):Object(h.jsx)("div",{children:Object(h.jsx)("span",{className:T.a.statusBlock,onDoubleClick:function(){e.authId===e.userId&&s(!0)},children:i||"No status"})})})},A=n(62),B=n.n(A),L=n.p+"static/media/Spinner-1s-200px.a77e97c8.svg",F=function(){return Object(h.jsx)("div",{children:Object(h.jsx)("img",{alt:"preloader",className:B.a.preloader,src:L})})},R=n(17),V=n(6),z=n(20),H=function(e){var t=e.editMode,n=e.dataType,a=e.dataValue,r=e.name,s=void 0===r?"":r,c=e.type,o=void 0===c?"text":c,i=e.validators,u=void 0===i?[]:i;return Object(h.jsxs)("div",{className:N.a.profileDataItem,children:[Object(h.jsx)("div",{className:N.a.profileDataItem_type,children:Object(h.jsx)("b",{children:n+": "})}),Object(h.jsx)("div",{className:N.a.profileDataItem_value,children:t?Object(h.jsx)(R.a,{name:s,component:z.a,type:o,placeholder:n,validate:V.a.apply(void 0,Object(S.a)(u))}):a||"-"})]})},W=function(e){var t=e.userProfile,n=e.setEditMode,a=e.isOwner,r=e.editMode;return Object(h.jsxs)("div",{children:[a&&Object(h.jsx)("button",{onClick:function(){return n(!0)},children:"Edit Info"}),Object(h.jsx)(H,{editMode:r,dataType:"Full name",dataValue:t.fullName}),Object(h.jsx)(H,{editMode:r,dataType:"ID",dataValue:t.userId}),Object(h.jsx)(H,{editMode:r,dataType:"About me",dataValue:t.aboutMe}),Object(h.jsx)(H,{editMode:r,dataType:"Looking for a job",dataValue:t.lookingForAJob?"yes":"no"}),Object(h.jsx)(H,{editMode:r,dataType:"My profs skills",dataValue:t.lookingForAJobDescription}),Object(h.jsx)("div",{children:Object(h.jsx)("b",{children:"Contacts"})}),Object(h.jsxs)("div",{className:N.a.contactsBlock,children:[" ",Object.keys(t.contacts).map((function(e){return Object(h.jsx)(H,{editMode:r,dataType:e,dataValue:t.contacts[e]},e)}))]})]})},J=function(e){var t=e.userProfile,n=e.editMode,a=e.authId,r=e.exitEditMode,s=e.updateProfileData,c=Object(I.a)(Object(I.a)({},t),t.contacts);delete c.photos;var o=function(){var e=Object(w.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",n);case 5:r();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(R.b,{onSubmit:o,initialValues:c,render:function(e){var r=e.submitError,s=e.handleSubmit,c=e.hasValidationErrors,o=e.submitting,i=e.pristine;return Object(h.jsxs)("form",{onSubmit:s,children:[Object(h.jsx)("button",{type:"submit",disabled:o||i||c,children:"Submit"}),Object(h.jsx)("span",{children:r&&" "+r}),Object(h.jsx)(H,{editMode:n,dataType:"Full name",dataValue:t.fullName,name:"fullName",validators:[V.d]}),Object(h.jsx)(H,{editMode:!1,dataType:"ID",dataValue:t.userId,name:"userId",validators:[function(e){return String(e)===String(a)?void 0:"ID is not ".concat(a)}]}),Object(h.jsx)(H,{editMode:n,dataType:"About me",dataValue:t.aboutMe,name:"aboutMe",validators:[V.d]}),Object(h.jsx)(H,{editMode:n,dataType:"Looking for a job",dataValue:t.lookingForAJob?"yes":"no",name:"lookingForAJob",type:"checkbox"}),Object(h.jsx)(H,{editMode:n,dataType:"My profs skills",dataValue:t.lookingForAJobDescription,name:"lookingForAJobDescription",validators:[V.d]}),Object(h.jsx)("div",{children:Object(h.jsx)("b",{children:"Contacts"})}),Object(h.jsxs)("div",{className:N.a.contactsBlock,children:[" ",Object.keys(t.contacts).map((function(e){return Object(h.jsx)(H,{editMode:n,dataType:e,dataValue:t.contacts[e],name:"contacts."+e},e)}))]})]})}})},G=function(e){var t=e.authId,n=e.userProfile,a=e.status,s=e.updateUserStatus,c=e.isOwner,o=e.updatePhoto,i=e.updateProfileData,u=r.a.useState(!1),l=Object(C.a)(u,2),d=l[0],p=l[1];return n.userId?Object(h.jsxs)("div",{className:N.a.profileMainBlock,children:[Object(h.jsxs)("div",{className:N.a.profileAvatarBlock,children:[Object(h.jsx)("img",{className:N.a.profileAvatar,alt:"userAvatar",src:n.photos.small?n.photos.small:M.a}),c&&Object(h.jsx)("input",{type:"file",onChange:function(e){return o(e.target.files[0])}})]}),Object(h.jsx)("div",{className:N.a.profileDataBlock,children:d?Object(h.jsx)(J,{userProfile:n,editMode:d,authId:t,exitEditMode:function(){return p(!1)},updateProfileData:i}):Object(h.jsx)(W,{userProfile:n,editMode:d,setEditMode:p,isOwner:c})}),Object(h.jsx)("div",{className:N.a.profileStatusBlock,children:Object(h.jsx)(U,{authId:t,userId:n.userId,status:a,updateUserStatus:s})})]}):Object(h.jsx)(F,{})},Y=n(9),K=n(7),q=(n(28),"profilePage/ADD_POST"),Z="profilePage/DELETE_POST",X="profilePage/SET_USER_PROFILE_DATA",Q="profilePage/SET_STATUS",$="profilePage/SET_PROFILE_PHOTO",ee={status:"",userProfile:{userId:null,lookingForAJob:!1,lookingForAJobDescription:"",fullName:"",aboutMe:"",contacts:{},photos:{small:null,large:null}},postsData:[{id:1,message:"Hi, how are you",likesCount:5},{id:2,message:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",likesCount:10}]},te=function(e){return{type:X,userProfile:e}},ne=function(e){return{type:Q,statusText:e}},ae=function(e){return function(){var t=Object(w.a)(y.a.mark((function t(n){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(K.c)(!0),t.next=3,Y.b.getProfile(e);case 3:a=t.sent,n(te(a.data)),n(Object(K.c)(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:var n={id:e.postsData.length+1,message:t.newPostText,likesCount:e.postsData.length+1};return Object(I.a)(Object(I.a)({},e),{},{postsData:[].concat(Object(S.a)(e.postsData),[n])});case Z:return Object(I.a)(Object(I.a)({},e),{},{postsData:Object(S.a)(e.postsData.filter((function(e){return e.id!==t.id})))});case X:return Object(I.a)(Object(I.a)({},e),{},{userProfile:Object(I.a)(Object(I.a)({},t.userProfile),{},{contacts:Object(I.a)({},t.userProfile.contacts),photos:Object(I.a)({},t.userProfile.photos)})});case Q:return Object(I.a)(Object(I.a)({},e),{},{status:t.statusText});case $:return Object(I.a)(Object(I.a)({},e),{},{userProfile:Object(I.a)(Object(I.a)({},e.userProfile),{},{photos:Object(I.a)({},t.photos)})});default:return e}},se=n(40),ce=n.n(se),oe=n(41),ie=n.n(oe),ue=function(e){return Object(h.jsxs)("div",{className:ie.a.post,children:[Object(h.jsx)("img",{alt:"ava",className:ie.a.avatar,src:"https://lwlies.com/wp-content/uploads/2017/04/avatar-2009.jpg"}),Object(h.jsx)("div",{className:ie.a.postText,children:e.message}),Object(h.jsx)("div",{children:Object(h.jsxs)("span",{children:[e.likesCount," likes"]})})]})},le=r.a.memo((function(e){var t=e.posts.slice(0).reverse().map((function(e){return Object(h.jsx)(ue,{message:e.message,likesCount:e.likesCount},e.id)}));return Object(h.jsxs)("div",{className:ce.a.postsBlock,children:["My posts",Object(h.jsx)("div",{children:Object(h.jsx)(de,{onSubmit:function(t){return e.addPost(t.newPostText)}})}),Object(h.jsx)("div",{className:ce.a.posts,children:t})]})})),de=function(e){return Object(h.jsx)(R.b,{onSubmit:e.onSubmit,render:function(e){var t=e.handleSubmit,n=(e.form,e.submitting);e.pristine,e.values;return Object(h.jsxs)("form",{onSubmit:t,children:[Object(h.jsx)(R.a,{name:"newPostText",component:z.b,className:ce.a.textareaBlock,placeholder:"Enter your new post",validate:Object(V.a)(V.d,Object(V.b)(25),Object(V.c)(5))}),Object(h.jsx)("button",{type:"submit",disabled:n,children:"Add post"})]})}})},pe=le,be=Object(g.b)((function(e){return{posts:e.profilePage.postsData,newPostText:e.profilePage.newPostText}}),{addPost:function(e){return{type:q,newPostText:e}}})(pe),je=function(e){var t=e.authId,n=e.userProfile,a=e.status,r=e.updateUserStatus,s=e.isOwner,c=e.updatePhoto,o=e.updateProfileData;return Object(h.jsxs)("div",{children:[Object(h.jsx)(G,{className:P.a.profileInfoBlock,authId:t,userProfile:n,status:a,updateUserStatus:r,isOwner:s,updatePhoto:c,updateProfileData:o}),Object(h.jsx)(be,{className:P.a.profileInfoBlock})]})},fe=n(21),he=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId||this.props.authId;e?(this.props.getUserProfile(e),this.props.getUserStatus(e)):this.props.history.push("/login")}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,n){e.match.params.userId!==this.props.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:[this.props.isFetching?Object(h.jsx)(F,{}):null,Object(h.jsx)(je,{authId:this.props.authId,userProfile:this.props.userProfile,status:this.props.status,updateUserStatus:this.props.updateUserStatus,isOwner:!this.props.match.params.userId||String(this.props.match.params.userId)===String(this.props.authId),updatePhoto:this.props.updatePhoto,updateProfileData:this.props.updateProfileData})]})}}]),n}(r.a.Component),Oe=Object(fe.c)(Object(g.b)((function(e){return{authId:e.auth.id,userProfile:e.profilePage.userProfile,status:e.profilePage.status,isFetching:e.profilePage.isFetching}}),{getUserProfile:ae,getUserStatus:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(n){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.b.getUserStatus(e);case 2:a=t.sent,n(ne(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserStatus:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y.b.updateUserStatus(e);case 3:0===t.sent.data.resultCode&&n(ne(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert('Error from thank "updateUserStatus":'+t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},setUserProfileData:te,updatePhoto:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(n){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(K.c)(!0),t.next=3,Y.b.updatePhoto(e);case 3:0===(a=t.sent).data.resultCode&&(n((r=a.data.data.photos,{type:$,photos:r})),n(Object(K.c)(!1)));case 5:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},updateProfileData:function(e){return function(){var t=Object(w.a)(y.a.mark((function t(n){var a,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(K.c)(!0),t.next=3,Y.b.updateProfileData(e);case 3:if(0!==(a=t.sent).data.resultCode){t.next=9;break}n(ae(e.userId)),n(Object(K.c)(!1)),t.next=12;break;case 9:return r={contacts:{}},a.data.messages.map((function(e){var t=e.split("->")[1].replace(")","").toLowerCase();r.contacts[t]=e})),t.abrupt("return",r);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),m.g)(he),me=n(27),ve=n(22),xe=n.n(ve),ge=function(e){var t=e.logIn,n=e.captchaURL;return Object(h.jsx)(R.b,{onSubmit:function(e){var n=e.email,a=e.password,r=(e.rememberMe,e.captcha);return t(n,a,!1,r)},render:function(e){var t=e.submitError,a=e.handleSubmit,r=(e.reset,e.form),s=e.submitting;e.pristine,e.values;return Object(h.jsxs)("form",{onSubmit:a,children:[Object(h.jsx)("div",{className:xe.a.submitError,children:t}),Object(h.jsx)(R.a,{name:"email",className:t?xe.a.submitError:xe.a.correct,component:z.a,placeholder:"Email",validate:Object(V.a)(V.d,Object(V.b)(25),Object(V.c)(5))}),Object(h.jsx)(R.a,{name:"password",className:t?xe.a.submitError:xe.a.correct,placeholder:"Password",component:z.a,type:"password",validate:Object(V.a)(V.d,Object(V.b)(25),Object(V.c)(5))}),Object(h.jsxs)("label",{children:[Object(h.jsx)(R.a,{name:"rememberMe",component:z.a,type:"checkbox"}),"remember me "]}),Object(h.jsxs)("div",{children:[n&&Object(h.jsx)("img",{src:n}),n&&Object(h.jsx)(R.a,{name:"captcha",className:t?xe.a.submitError:xe.a.correct,placeholder:"Captcha",component:z.a,type:"text",validate:Object(V.a)(V.d,Object(V.b)(10))})]}),Object(h.jsxs)("div",{className:xe.a.buttonBlock,children:[Object(h.jsx)("button",{type:"submit",disabled:s,children:"Login"}),Object(h.jsx)("button",{type:"button",onClick:r.reset,children:"Reset"})]})]})}})},_e=function(e){var t=e.isAuth,n=e.logIn,a=e.captchaURL;return t?Object(h.jsx)(m.a,{to:"/profile"}):Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Login"}),Object(h.jsx)(ge,{logIn:n,captchaURL:a})]})},Pe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsx)(_e,Object(I.a)({},this.props))}}]),n}(r.a.Component),ke=Object(g.b)((function(e){return{isAuth:e.auth.isAuth,captchaURL:e.auth.captchaURL}}),{logIn:me.c})(Pe),ye=r.a.lazy((function(){return n.e(3).then(n.bind(null,106))})),we=r.a.lazy((function(){return n.e(4).then(n.bind(null,105))})),Ie=r.a.lazy((function(){return n.e(6).then(n.bind(null,102))})),Se=r.a.lazy((function(){return n.e(5).then(n.bind(null,103))})),Ce=r.a.lazy((function(){return n.e(7).then(n.bind(null,104))})),Ee=function(){return Object(h.jsxs)("div",{className:x.a.appWrapperContent,children:[Object(h.jsx)("div",{className:x.a.contentHeadImage}),Object(h.jsx)("div",{className:x.a.dynamicContent,children:Object(h.jsx)(r.a.Suspense,{fallback:Object(h.jsx)(F,{}),children:Object(h.jsxs)(m.d,{children:[Object(h.jsx)(m.a,{exact:!0,from:"/",to:"/profile"}),Object(h.jsx)(m.b,{path:"/profile/:userId?",render:function(){return Object(h.jsx)(Oe,{})}}),Object(h.jsx)(m.b,{path:"/messenger",render:function(){return Object(h.jsx)(ye,{})}}),Object(h.jsx)(m.b,{path:"/users",render:function(){return Object(h.jsx)(we,{})}}),Object(h.jsx)(m.b,{path:"/news",render:function(){return Object(h.jsx)(Ie,{})}}),Object(h.jsx)(m.b,{path:"/music",render:function(){return Object(h.jsx)(Se,{})}}),Object(h.jsx)(m.b,{path:"/settings",render:function(){return Object(h.jsx)(Ce,{})}}),Object(h.jsx)(m.b,{path:"/login",render:function(){return Object(h.jsx)(ke,{})}}),Object(h.jsx)(m.b,{path:"*",render:function(){return Object(h.jsx)("div",{children:" 404 Not Found "})}})]})})})]})},Ne=n(42),Me=n.n(Ne),De=function(e){return Object(h.jsxs)("header",{className:Me.a.header,children:[Object(h.jsx)("img",{alt:"logo",src:"https://templates.iqonic.design/socialv/intro/images/logo-full.png",className:Me.a.headerImg}),Object(h.jsx)("div",{className:Me.a.loginBlock,children:e.isAuth?Object(h.jsxs)("div",{children:[" ",e.login+" ",Object(h.jsx)("button",{type:"button",onClick:e.logOut,children:" LogOut"})]}):Object(h.jsx)(b.b,{to:"/login",children:"Login"})})]})},Te=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsx)(De,Object(I.a)({},this.props))}}]),n}(r.a.Component),Ue=Object(g.b)((function(e){return{login:e.auth.login,isAuth:e.auth.isAuth}}),{logOut:me.d})(Te),Ae=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).catchAllUnhandledErrors=function(e,t){alert("unhandled error is catched: ".concat(e)),console.error(e,t)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.initialized?Object(h.jsx)(b.a,{children:Object(h.jsxs)("div",{className:p.a.appWrapper,children:[Object(h.jsx)("div",{className:p.a.block+" "+p.a.header,children:Object(h.jsx)(Ue,{})}),Object(h.jsx)("div",{className:p.a.block+" "+p.a.navbar,children:Object(h.jsx)(O,{})}),Object(h.jsx)("div",{className:p.a.block+" "+p.a.content,children:Object(h.jsx)(Ee,{})})]})}):Object(h.jsx)(F,{})}}]),n}(r.a.Component),Be=Object(fe.c)(Object(g.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:K.b}))(Ae),Le=n(59),Fe={},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;return e},Ve=n(60),ze=n(64),He=Object(fe.b)({profilePage:re,messengerPage:Le.b,usersPage:Ve.a,sidebar:Re,auth:me.a,app:K.a}),We=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||fe.c,Je=Object(fe.d)(He,We(Object(fe.a)(ze.a)));window.__store__=Je;var Ge=Je;c.a.render(Object(h.jsx)(g.a,{store:Ge,children:Object(h.jsx)(Be,{})}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.be27eed5.chunk.js.map